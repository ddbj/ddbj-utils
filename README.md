# ddbj-utils



Install
```
git clone git@github.com:tfuji/ddbj-utils.git && cd ddbj-utils
bundle install
```
## biosample2ids

Getting accession, publication_date, and last_update from Biosample_set.xml

```
[土  6 05 12:50] tf@~/repos/ddbj-utils
%bundle exec ruby biosample2ids.rb test.xml 
SAMN00000002  2008-04-04T00:00:00.000 2019-06-20T16:11:22.271
SAMN00000003  2008-04-04T00:00:00.000 2019-06-20T16:11:22.351
SAMN00000004  2008-04-04T00:00:00.000 2019-06-20T16:11:22.415
SAMN00000005  2008-04-04T08:44:25.967 2013-06-12T08:26:56.080
SAMN00000006  2008-04-04T08:44:26.233 2013-06-12T08:26:56.570
SAMN00000007  2008-04-04T00:00:00.000 2019-06-20T16:11:22.471
SAMN00000008  2008-04-04T00:00:00.000 2019-06-20T16:11:22.519
SAMN00000009  2008-04-04T08:44:27.670 2013-06-12T08:42:16.823
SAMN00000010  2008-04-04T08:44:28.043 2013-06-12T08:42:30.383
SAMN00000011  2008-04-04T00:00:00.000 2019-06-20T16:11:22.557
SAMN00000012  2008-04-04T00:00:00.000 2019-06-20T16:11:22.605
SAMN00000013  2008-04-04T08:44:29.250 2014-03-17T12:37:44.407
SAMN00000014  2008-04-04T00:00:00.000 2020-08-30T02:00:02.391
SAMN00000015  2008-04-04T00:00:00.000 2019-06-20T16:11:22.722
SAMN00000016  2008-04-04T00:00:00.000 2019-06-20T16:11:22.812
SAMN00000017  2008-04-04T00:00:00.000 2019-06-20T16:11:22.868
SAMN00000018  2008-04-04T08:44:31.000 2015-02-12T16:08:04.733
SAMN00000019  2008-04-04T08:44:31.340 2015-02-20T14:38:53.503
SAMN00000020  2008-04-04T08:44:31.717 2015-02-12T16:06:27.150
SAMN00000021  2008-04-04T08:44:32.030 2015-02-12T16:01:58.433
```

### Date range filter

```
[土  6 05 16:58] tf@~/repos/ddbj-utils
%bundle exec ruby biosample2ids.rb test.xml --begin=2008-04-04 --end=2008-04-04
### Filtered by date range (2008-04-04 .. 2008-04-04).
SAMN00000002  2008-04-04T00:00:00.000 2019-06-20T16:11:22.271
SAMN00000003  2008-04-04T00:00:00.000 2019-06-20T16:11:22.351
SAMN00000004  2008-04-04T00:00:00.000 2019-06-20T16:11:22.415
SAMN00000005  2008-04-04T08:44:25.967 2013-06-12T08:26:56.080
SAMN00000006  2008-04-04T08:44:26.233 2013-06-12T08:26:56.570
SAMN00000007  2008-04-04T00:00:00.000 2019-06-20T16:11:22.471
SAMN00000008  2008-04-04T00:00:00.000 2019-06-20T16:11:22.519
SAMN00000009  2008-04-04T08:44:27.670 2013-06-12T08:42:16.823
SAMN00000010  2008-04-04T08:44:28.043 2013-06-12T08:42:30.383
SAMN00000011  2008-04-04T00:00:00.000 2019-06-20T16:11:22.557
SAMN00000012  2008-04-04T00:00:00.000 2019-06-20T16:11:22.605
SAMN00000013  2008-04-04T08:44:29.250 2014-03-17T12:37:44.407
SAMN00000014  2008-04-04T00:00:00.000 2020-08-30T02:00:02.391
SAMN00000015  2008-04-04T00:00:00.000 2019-06-20T16:11:22.722
SAMN00000016  2008-04-04T00:00:00.000 2019-06-20T16:11:22.812
SAMN00000017  2008-04-04T00:00:00.000 2019-06-20T16:11:22.868
SAMN00000018  2008-04-04T08:44:31.000 2015-02-12T16:08:04.733
SAMN00000019  2008-04-04T08:44:31.340 2015-02-20T14:38:53.503
SAMN00000020  2008-04-04T08:44:31.717 2015-02-12T16:06:27.150
SAMN00000021  2008-04-04T08:44:32.030 2015-02-12T16:01:58.433
[土  6 05 16:58] tf@~/repos/ddbj-utils
%bundle exec ruby biosample2ids.rb test.xml --begin=2008-04-05
### Filtered by date range (2008-04-05 .. 2021-06-05).

```

### Split the file by year
```
%bundle exec ruby biosample2output.rb test.xml --begin=2008-04-04 --end=2008-04-04 --split-year --outdir ./out-test
### set parms {"h"=>nil, "begin"=>"2008-04-04", "end"=>"2008-04-04", "outdir"=>"./out-test", "split-year"=>true, "split-month"=>false}
### Filtered by date range (2008-04-04 .. 2008-04-04).
SAMN00000002  2008-04-04T00:00:00.000 2019-06-20T16:11:22.271
SAMN00000003  2008-04-04T00:00:00.000 2019-06-20T16:11:22.351
SAMN00000004  2008-04-04T00:00:00.000 2019-06-20T16:11:22.415
SAMN00000005  2008-04-04T08:44:25.967 2013-06-12T08:26:56.080
SAMN00000006  2008-04-04T08:44:26.233 2013-06-12T08:26:56.570
SAMN00000007  2008-04-04T00:00:00.000 2019-06-20T16:11:22.471
SAMN00000008  2008-04-04T00:00:00.000 2019-06-20T16:11:22.519
SAMN00000009  2008-04-04T08:44:27.670 2013-06-12T08:42:16.823
SAMN00000010  2008-04-04T08:44:28.043 2013-06-12T08:42:30.383
SAMN00000011  2008-04-04T00:00:00.000 2019-06-20T16:11:22.557
SAMN00000012  2008-04-04T00:00:00.000 2019-06-20T16:11:22.605
SAMN00000013  2008-04-04T08:44:29.250 2014-03-17T12:37:44.407
SAMN00000014  2008-04-04T00:00:00.000 2020-08-30T02:00:02.391
SAMN00000015  2008-04-04T00:00:00.000 2019-06-20T16:11:22.722
SAMN00000016  2008-04-04T00:00:00.000 2019-06-20T16:11:22.812
SAMN00000017  2008-04-04T00:00:00.000 2019-06-20T16:11:22.868
SAMN00000018  2008-04-04T08:44:31.000 2015-02-12T16:08:04.733
SAMN00000019  2008-04-04T08:44:31.340 2015-02-20T14:38:53.503
SAMN00000020  2008-04-04T08:44:31.717 2015-02-12T16:06:27.150
SAMN00000021  2008-04-04T08:44:32.030 2015-02-12T16:01:58.433
```

Output

```
%tree out-test/
out-test/
└── 2008
    └── split-biosample.xml

    1 directory, 1 file
```


